{"version":3,"file":"VolumeProfile.js","sourceRoot":"","sources":["../../../../../../src/.internal/charts/stock/indicators/VolumeProfile.ts"],"names":[],"mappings":"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","sourcesContent":["import type { DateAxis } from \"../../xy/axes/DateAxis\";\r\nimport type { Color } from \"../../../core/util/Color\";\r\nimport type { Graphics } from \"../../../core/render/Graphics\";\r\n\r\nimport { AxisRendererX } from \"../../xy/axes/AxisRendererX\";\r\nimport { ValueAxis } from \"../../xy/axes/ValueAxis\";\r\nimport { Indicator, IIndicatorSettings, IIndicatorPrivate, IIndicatorEvents, IIndicatorEditableSetting } from \"./Indicator\";\r\nimport { ColumnSeries } from \"../../xy/series/ColumnSeries\";\r\nimport { percent } from \"../../../core/util/Percent\";\r\n\r\nimport * as $type from \"../../../core/util/Type\";\r\n\r\nexport interface IVolumeProfileSettings extends IIndicatorSettings {\r\n\t/**\r\n\t * Volume up color.\r\n\t */\r\n\tupColor?: Color;\r\n\r\n\t/**\r\n\t * Volume down color.\r\n\t */\r\n\tdownColor?: Color;\r\n\r\n\t/**\r\n\t * Type of count\r\n\t * @todo: what if translated in options?\r\n\t */\r\n\tcountType?: \"rows\" | \"ticks\";\r\n\r\n\t/**\r\n\t * Number of rows or number of ticks, depending on the countType.\r\n\t *\r\n\t * @default 24\r\n\t */\r\n\tcount?: number;\r\n\r\n\t/**\r\n\t * Max width of columns in percent (%).\r\n\t * \r\n\t * @default 40\r\n\t */\r\n\taxisWidth?: number;\r\n\r\n\t/**\r\n\t * Specifies what percentage of all volume for the trading session should\r\n\t * be highlighted by Value Area.\r\n\t * \r\n\t * @default 70\r\n\t */\r\n\tvalueArea?: number;\r\n\r\n\t/**\r\n\t * Opacity of columns which fall withing value area.\r\n\t * \r\n\t * @default .7\r\n\t */\r\n\tvalueAreaOpacity?: number;\r\n}\r\n\r\nexport interface IVolumeProfilePrivate extends IIndicatorPrivate {\r\n}\r\n\r\nexport interface IVolumeProfileEvents extends IIndicatorEvents {\r\n}\r\n\r\n/**\r\n * An implementation of a Volume Profile indicator for a [[StockChart]].\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/stock/indicators/} for more info\r\n * @since 5.7.0\r\n */\r\nexport class VolumeProfile extends Indicator {\r\n\tpublic static className: string = \"VolumeProfile\";\r\n\tpublic static classNames: Array<string> = Indicator.classNames.concat([VolumeProfile.className]);\r\n\r\n\tdeclare public _settings: IVolumeProfileSettings;\r\n\tdeclare public _privateSettings: IVolumeProfilePrivate;\r\n\tdeclare public _events: IVolumeProfileEvents;\r\n\r\n\t/**\r\n\t * Indicator series.\r\n\t */\r\n\tdeclare public series: ColumnSeries;\r\n\r\n\tpublic _editableSettings: IIndicatorEditableSetting[] = [{\r\n\t\tkey: \"countType\",\r\n\t\tname: this.root.language.translateAny(\"Count\"),\r\n\t\ttype: \"dropdown\",\r\n\t\toptions: [\r\n\t\t\t{ value: \"rows\", text: this.root.language.translateAny(\"number of rows\") },\r\n\t\t\t{ value: \"ticks\", text: this.root.language.translateAny(\"ticks per row\") }\r\n\t\t]\r\n\t}, {\r\n\t\tkey: \"count\",\r\n\t\tname: this.root.language.translateAny(\"Count\"),\r\n\t\ttype: \"number\"\r\n\t}, {\r\n\t\tkey: \"valueArea\",\r\n\t\tname: this.root.language.translateAny(\"Value Area\"),\r\n\t\ttype: \"number\"\r\n\t}, {\r\n\t\tkey: \"upColor\",\r\n\t\tname: this.root.language.translateAny(\"Up volume\"),\r\n\t\ttype: \"color\"\r\n\t}, {\r\n\t\tkey: \"downColor\",\r\n\t\tname: this.root.language.translateAny(\"Down volume\"),\r\n\t\ttype: \"color\"\r\n\t}, {\r\n\t\tkey: \"axisWidth\",\r\n\t\tname: this.root.language.translateAny(\"Width %\"),\r\n\t\ttype: \"number\"\r\n\t}];\r\n\r\n\tpublic xAxis!: ValueAxis<AxisRendererX>;\r\n\r\n\tpublic upSeries!: ColumnSeries;\r\n\r\n\tprotected _previousColumn?: Graphics;\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\r\n\t\tconst volumeSeries = this.get(\"volumeSeries\");\r\n\t\tconst stockSeries = this.get(\"stockSeries\");\r\n\t\tif (volumeSeries) {\r\n\t\t\tconst chart = stockSeries.chart;\r\n\t\t\tconst root = this._root;\r\n\r\n\t\t\tif (chart) {\r\n\t\t\t\tconst yAxis = stockSeries.get(\"yAxis\") as any;\r\n\t\t\t\tconst panelXAxis = stockSeries.get(\"xAxis\") as DateAxis<AxisRendererX>;\r\n\r\n\t\t\t\tpanelXAxis.on(\"start\", () => {\r\n\t\t\t\t\tthis.markDataDirty();\r\n\t\t\t\t})\r\n\t\t\t\tpanelXAxis.on(\"end\", () => {\r\n\t\t\t\t\tthis.markDataDirty();\r\n\t\t\t\t})\r\n\r\n\t\t\t\tconst xRenderer = AxisRendererX.new(root, {});\r\n\t\t\t\txRenderer.grid.template.set(\"forceHidden\", true);\r\n\t\t\t\txRenderer.labels.template.set(\"forceHidden\", true);\r\n\r\n\t\t\t\tthis.xAxis = chart.xAxes.push(ValueAxis.new(root, {\r\n\t\t\t\t\tzoomable: false,\r\n\t\t\t\t\tstrictMinMax: true,\r\n\t\t\t\t\trenderer: xRenderer\r\n\t\t\t\t}));\r\n\r\n\t\t\t\tif (yAxis.get(\"renderer\").get(\"opposite\")) {\r\n\t\t\t\t\txRenderer.set(\"inversed\", true);\r\n\t\t\t\t\tthis.xAxis.setAll({\r\n\t\t\t\t\t\tx: percent(100),\r\n\t\t\t\t\t\tcenterX: percent(100)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.series = chart.series.unshift(ColumnSeries.new(root, {\r\n\t\t\t\t\txAxis: this.xAxis,\r\n\t\t\t\t\tyAxis: yAxis,\r\n\t\t\t\t\tvalueXField: \"down\",\r\n\t\t\t\t\topenValueXField: \"xOpen\",\r\n\t\t\t\t\topenValueYField: \"yOpen\",\r\n\t\t\t\t\tvalueYField: \"y\",\r\n\t\t\t\t\tcalculateAggregates: true,\r\n\t\t\t\t\tthemeTags: [\"indicator\", \"volumeprofile\"]\t\t\t\t\t\r\n\t\t\t\t}))\r\n\t\t\t\t\r\n\r\n\t\t\t\tthis.upSeries = chart.series.unshift(ColumnSeries.new(root, {\r\n\t\t\t\t\txAxis: this.xAxis,\r\n\t\t\t\t\tyAxis: yAxis,\r\n\t\t\t\t\tvalueXField: \"total\",\r\n\t\t\t\t\topenValueXField: \"down\",\r\n\t\t\t\t\topenValueYField: \"yOpen\",\r\n\t\t\t\t\tvalueYField: \"y\",\r\n\t\t\t\t\tcalculateAggregates: true,\r\n\t\t\t\t\tthemeTags: [\"indicator\", \"volumeprofile\"]\r\n\t\t\t\t}))\r\n\r\n\t\t\t\tthis.upSeries.setPrivate(\"doNotUpdateLegend\", true);\r\n\t\t\t\tthis.series.setPrivate(\"doNotUpdateLegend\", true);\r\n\r\n\t\t\t\tthis.upSeries.setPrivate(\"baseValueSeries\", stockSeries);\r\n\t\t\t\tthis.series.setPrivate(\"baseValueSeries\", stockSeries);\t\t\t\t\r\n\r\n\t\t\t\tthis._handleLegend(this.series);\r\n\r\n\t\t\t\tthis._addInteractivity(this.series);\r\n\t\t\t\tthis._addInteractivity(this.upSeries);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _addInteractivity(series: ColumnSeries) {\r\n\t\tseries.columns.template.events.on(\"pointerover\", (e) => {\r\n\t\t\tlet dataItem = e.target.dataItem;\r\n\r\n\t\t\tif (dataItem) {\r\n\t\t\t\tif (dataItem.component == this.upSeries) {\r\n\t\t\t\t\tdataItem = this.series.dataItems[this.upSeries.dataItems.indexOf(dataItem)];\r\n\t\t\t\t\tif (dataItem) {\r\n\t\t\t\t\t\tconst column = dataItem.get(\"graphics\" as any);\r\n\t\t\t\t\t\tif (column) {\r\n\t\t\t\t\t\t\tcolumn.hover();\r\n\t\t\t\t\t\t\tthis._previousColumn = column;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tdataItem = this.upSeries.dataItems[this.series.dataItems.indexOf(dataItem)];\r\n\t\t\t\t\tif (dataItem) {\r\n\t\t\t\t\t\tconst column = dataItem.get(\"graphics\" as any);\r\n\t\t\t\t\t\tif (column) {\r\n\t\t\t\t\t\t\tcolumn.hover();\r\n\t\t\t\t\t\t\tthis._previousColumn = column;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.series.updateLegendValue(dataItem);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tseries.columns.template.events.on(\"pointerout\", () => {\r\n\t\t\tthis.series.updateLegendValue(undefined);\r\n\t\t\tif (this._previousColumn) {\r\n\t\t\t\tthis._previousColumn.unhover();\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\tseries.columns.template.adapters.add(\"fillOpacity\", (fillOpacity, target) => {\r\n\t\t\tconst dataItem = target.dataItem;\r\n\t\t\tif (dataItem) {\r\n\t\t\t\tconst dataContext = dataItem.dataContext as any;\r\n\t\t\t\tif (dataContext) {\r\n\t\t\t\t\tif (dataContext.area) {\r\n\t\t\t\t\t\treturn this.get(\"valueAreaOpacity\", .7);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn fillOpacity;\r\n\t\t})\r\n\t}\r\n\r\n\tpublic _updateChildren(): void {\r\n\t\tsuper._updateChildren();\r\n\r\n\t\tif (this.isDirty(\"count\") || this.isDirty(\"countType\") || this.isDirty(\"valueArea\")) {\r\n\t\t\tthis.markDataDirty();\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"upColor\")) {\r\n\t\t\tconst upColor = this.get(\"upColor\");\r\n\t\t\tthis.upSeries.set(\"fill\", upColor);\r\n\t\t\tthis.upSeries.set(\"stroke\", upColor);\r\n\t\t\tthis.setCustomData(\"upColor\", upColor);\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"downColor\")) {\r\n\t\t\tconst downColor = this.get(\"downColor\");\r\n\t\t\tthis.series.set(\"fill\", downColor);\r\n\t\t\tthis.series.set(\"stroke\", downColor);\r\n\t\t\tthis.setCustomData(\"downColor\", downColor);\r\n\t\t}\r\n\r\n\t\tif (this.isDirty(\"axisWidth\")) {\r\n\t\t\tthis.xAxis.set(\"width\", percent(this.get(\"axisWidth\", 40)));\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic prepareData() {\r\n\t\tconst volumeSeries = this.get(\"volumeSeries\");\r\n\t\tconst stockSeries = this.get(\"stockSeries\");\r\n\r\n\t\tif (volumeSeries) {\r\n\t\t\tlet startIndex = volumeSeries.startIndex();\r\n\t\t\tlet endIndex = volumeSeries.endIndex();\r\n\r\n\t\t\tconst count = this.get(\"count\", 20);\r\n\t\t\tconst type = this.get(\"countType\");\r\n\t\t\tlet step = 1;\r\n\r\n\t\t\tlet min = Infinity;\r\n\t\t\tlet max = -Infinity;\r\n\r\n\t\t\tfor (let i = startIndex; i < endIndex; i++) {\r\n\t\t\t\tconst dataItem = stockSeries.dataItems[i];\r\n\t\t\t\tif (dataItem) {\r\n\t\t\t\t\tconst close = dataItem.get(\"valueY\");\r\n\t\t\t\t\tif ($type.isNumber(close)) {\r\n\t\t\t\t\t\tif (close < min) {\r\n\t\t\t\t\t\t\tmin = close;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tif (close > max) {\r\n\t\t\t\t\t\t\tmax = close;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet rows: number;\r\n\t\t\tif (type == \"ticks\") {\r\n\t\t\t\tstep = count / 100;\r\n\t\t\t\tmin = Math.floor(min / step) * step;\r\n\t\t\t\tmax = Math.ceil(max / step) * step;\r\n\t\t\t\trows = (max - min) / step;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tstep = (max - min) / count;\r\n\t\t\t\trows = count;\r\n\t\t\t}\r\n\r\n\t\t\tconst rowDataDown: Array<number> = [];\r\n\t\t\tconst rowDataUp: Array<number> = [];\r\n\r\n\t\t\tfor (let i = 0; i < rows; i++) {\r\n\t\t\t\trowDataDown[i] = 0;\r\n\t\t\t\trowDataUp[i] = 0;\r\n\t\t\t}\r\n\r\n\t\t\tlet previousDataItem;\r\n\t\t\tfor (let i = startIndex; i < endIndex; i++) {\r\n\t\t\t\tconst dataItem = stockSeries.dataItems[i];\r\n\t\t\t\tconst volumeDataItem = volumeSeries.dataItems[i];\r\n\t\t\t\tif (dataItem && volumeDataItem) {\r\n\t\t\t\t\tconst close = dataItem.get(\"valueY\");\r\n\t\t\t\t\tconst volume = volumeDataItem.get(\"valueY\");\r\n\r\n\t\t\t\t\tif ($type.isNumber(close) && $type.isNumber(volume)) {\r\n\t\t\t\t\t\tlet index = Math.floor((close - min) / step);\r\n\t\t\t\t\t\tif (index == count) {\r\n\t\t\t\t\t\t\tindex = count - 1;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif ($type.isNumber(index)) {\r\n\t\t\t\t\t\t\tif (previousDataItem && previousDataItem.get(\"valueY\", close) < close) {\r\n\t\t\t\t\t\t\t\trowDataDown[index] += volume;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\trowDataUp[index] += volume;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpreviousDataItem = dataItem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tconst dataDown = [];\r\n\t\t\tlet sum = 0;\r\n\t\t\tfor (let i = 0; i < rows; i++) {\r\n\t\t\t\tlet total = rowDataUp[i] + rowDataDown[i];\r\n\t\t\t\tsum += total;\r\n\r\n\t\t\t\tdataDown.push({\r\n\t\t\t\t\tyOpen: min + i * step,\r\n\t\t\t\t\ty: min + (i + 1) * step,\r\n\t\t\t\t\tup: rowDataUp[i],\r\n\t\t\t\t\tdown: rowDataDown[i],\r\n\t\t\t\t\ttotal: total,\r\n\t\t\t\t\txOpen: 0,\r\n\t\t\t\t\tarea: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tlet len = this.series.data.length;\r\n\t\t\tif (len == dataDown.length) {\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tthis.series.data.setIndex(i, dataDown[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.series.data.setAll(dataDown);\r\n\t\t\t}\r\n\r\n\t\t\tconst dataUp = [];\r\n\r\n\t\t\tlet highest = 0;\r\n\t\t\tlet hi = 0;\r\n\r\n\t\t\tfor (let i = 0; i < rows; i++) {\r\n\t\t\t\tlet total = rowDataUp[i] + rowDataDown[i];\r\n\t\t\t\tdataUp.push({\r\n\t\t\t\t\tyOpen: min + i * step,\r\n\t\t\t\t\ty: min + (i + 1) * step,\r\n\t\t\t\t\tup: rowDataUp[i],\r\n\t\t\t\t\tdown: rowDataDown[i],\r\n\t\t\t\t\ttotal: total,\r\n\t\t\t\t\tarea: false\r\n\t\t\t\t})\r\n\r\n\t\t\t\tif (total > highest) {\r\n\t\t\t\t\thighest = total;\r\n\t\t\t\t\thi = i;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tlet valueArea = sum * this.get(\"valueArea\", 70) / 100;\r\n\t\t\tlet area = highest;\r\n\r\n\t\t\tlet cd = 1;\r\n\t\t\tlet cu = 1;\r\n\t\t\tlet dlen = dataUp.length;\r\n\r\n\t\t\tdataUp[hi].area = true;\r\n\t\t\tdataDown[hi].area = true;\r\n\r\n\t\t\t/* \r\n\t\t\t// with two rows\r\n\t\t\twhile (area < valueArea) {\r\n\t\t\t\tlet rowAbove1 = hi + cu;\r\n\t\t\t\tlet rowAbove2 = hi + cu + 1;\r\n\r\n\t\t\t\tlet sumAbove = 0\r\n\t\t\t\tif (rowAbove1 < dlen) {\r\n\t\t\t\t\tsumAbove += dataUp[rowAbove1].total;\r\n\t\t\t\t}\r\n\t\t\t\tif (rowAbove2 < dlen) {\r\n\t\t\t\t\tsumAbove += dataUp[rowAbove2].total;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet rowBelow1 = hi - cd;\r\n\t\t\t\tlet rowBelow2 = hi - cd - 1;\r\n\r\n\t\t\t\tlet sumBelow = 0\r\n\t\t\t\tif (rowBelow1 >= 0) {\r\n\t\t\t\t\tsumBelow += dataUp[rowBelow1].total;\r\n\t\t\t\t}\r\n\t\t\t\tif (rowBelow2 >= 0) {\r\n\t\t\t\t\tsumBelow += dataUp[rowBelow2].total;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (sumBelow <= sumAbove) {\r\n\t\t\t\t\tarea += sumAbove;\r\n\t\t\t\t\tif (rowAbove1 < dlen) {\r\n\t\t\t\t\t\tdataDown[rowAbove1].area = true;\r\n\t\t\t\t\t\tdataUp[rowAbove1].area = true;\r\n\t\t\t\t\t\tcu++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (rowAbove2 < dlen) {\r\n\t\t\t\t\t\tdataDown[rowAbove2].area = true;\r\n\t\t\t\t\t\tdataUp[rowAbove2].area = true;\r\n\t\t\t\t\t\tcu++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tarea += sumBelow;\r\n\t\t\t\t\tif (rowBelow1 >= 0) {\r\n\t\t\t\t\t\tdataDown[rowBelow1].area = true;\r\n\t\t\t\t\t\tdataUp[rowBelow1].area = true;\r\n\t\t\t\t\t\tcd++;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (rowBelow2 >= 0) {\r\n\t\t\t\t\t\tdataDown[rowBelow2].area = true;\r\n\t\t\t\t\t\tdataUp[rowBelow2].area = true;\r\n\t\t\t\t\t\tcd++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (sumBelow == 0) {\r\n\t\t\t\t\tcd++;\r\n\t\t\t\t}\r\n\t\t\t\tif (sumAbove == 0) {\r\n\t\t\t\t\tcu++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((cd > dlen && cu > dlen)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t*/\r\n\r\n\t\t\t// single row\r\n\t\t\twhile (area < valueArea) {\r\n\t\t\t\tlet rowAbove1 = hi + cu;\r\n\t\t\t\tlet sumAbove = 0\r\n\t\t\t\tif (rowAbove1 < dlen) {\r\n\t\t\t\t\tsumAbove += dataUp[rowAbove1].total;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet rowBelow1 = hi - cd;\r\n\r\n\t\t\t\tlet sumBelow = 0\r\n\t\t\t\tif (rowBelow1 >= 0) {\r\n\t\t\t\t\tsumBelow += dataUp[rowBelow1].total;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (sumBelow <= sumAbove) {\r\n\t\t\t\t\tarea += sumAbove;\r\n\t\t\t\t\tif (rowAbove1 < dlen) {\r\n\t\t\t\t\t\tdataDown[rowAbove1].area = true;\r\n\t\t\t\t\t\tdataUp[rowAbove1].area = true;\r\n\t\t\t\t\t\tcu++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tarea += sumBelow;\r\n\t\t\t\t\tif (rowBelow1 >= 0) {\r\n\t\t\t\t\t\tdataDown[rowBelow1].area = true;\r\n\t\t\t\t\t\tdataUp[rowBelow1].area = true;\r\n\t\t\t\t\t\tcd++;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (sumBelow == 0) {\r\n\t\t\t\t\tcd++;\r\n\t\t\t\t}\r\n\t\t\t\tif (sumAbove == 0) {\r\n\t\t\t\t\tcu++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ((cd > dlen && cu > dlen)) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tarea = Math.ceil(area);\r\n\r\n\t\t\tlen = this.upSeries.data.length;\r\n\t\t\tif (len == dataUp.length) {\r\n\t\t\t\tfor (let i = 0; i < len; i++) {\r\n\t\t\t\t\tthis.upSeries.data.setIndex(i, dataUp[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.upSeries.data.setAll(dataUp);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected _dispose() {\r\n\t\tsuper._dispose();\r\n\t\tif (this.upSeries) {\r\n\t\t\tthis.upSeries.dispose();\r\n\t\t}\r\n\r\n\t\tif (this.xAxis) {\r\n\t\t\tthis.xAxis.dispose();\r\n\t\t}\r\n\t}\r\n}"]}